I want you to set up a CLI tool written in TypeScript, specifically with Effect TypeScript. This CLI tool will on the one side build to a CLI and on the other side expose an object which can be used in a library. The tool should take a GitHub app PEM key and generate login credentials for GitHub with it. Using this CLI can be used to make a scoped log into GitHub via a GitHub app. The problem is that for personal GitHub accounts it is very difficult to limit access for bot machines. When I have a GitHub project and I invite a collaborator, for example a bot account, then this bot has full access because to limit access a GitHub app can create a GitHub app which has limited access. For example, it cannot merge pull requests, but the app can push and open or close issues and all that stuff, but it cannot influence production. Doing this with a personal account without an organization is very difficult, but for GitHub apps there is no GitHub login. So there has to be a key has to be created and this is what this CLI tool will do. I want to be able to create, I want to be able to give it a PEM key which I created for my GitHub app. This PEM key should be stored safely encrypted somewhere the CLI is installed. Then this CLI should be used to generate keys or JWTs. I think the JWTs have a limited lifetime, so when the CLI is called again and the token is not valid anymore, a fresh token has to be created. So the CLI can be used to provide a fresh GitHub session. This should work like a... This should work from the idea similar to an AWS single sign on where I log in once and then I have a valid session for my profiles and can just use this. So we need to... Or let's say either we use this CLI to also run GitHub commands or we use it only to generate credentials and then just run GitHub commands from the command line to interact with the GitHub CLI and the credentials are set in the shell. So an agent has to reach once for this app token CLI and then it can use the GitHub CLI commands or maybe it's better to just wrap all GitHub CLI commands or make it agnostic but that we run the GitHub CLI commands through this app token CLI. I want a build pipeline and the implementation tests of course that's why we are using effect to have easy tests set up nice dependency injection. You should use the effect skill for proper effect implementations. Yeah, we need a build pipeline to build an MPM package or to build the CLI and to publish an MPM package with the construct that can be used to manage store the app token, et cetera. If you are not sure about effect primitives, please use context seven to get access to the effect documentation effect has a lot of built in primitives which can be used for stores for secrets for variables for config for errors, et cetera, et cetera. This should be used heavily.
